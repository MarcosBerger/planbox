<div class="contain-to-grid fixed">
  <nav class="top-bar" data-topbar>
    <ul class="title-area">
      <li class="name"></li>
      <li class="toggle-topbar menu-icon"><a href="#"></a></li>
    </ul>
    <section class="top-bar-section">
      <ul class="left">
        {{#if public}}
        <li><span class="checked-icon">&#10004;</span>&nbsp;Published</li>
        <li><a href="#" class="save-btn button disabled">Publish Changes</a></li>
        <li><a href="javascript:window.print()" class="print-btn btn"><span class="printer-icon"></span>Print Poster</a></li>
        {{else}}
        <li><a href="#" class="save-btn button disabled">Save Draft</a></li>
        {{/if}}
        <li>
          <a href="#" data-reveal-id="customdomainmessage">Custom Domain</a>
          <div id="customdomainmessage" class="reveal-modal" data-reveal>
            <p>Want a custom domain name for your project? No problem! Email us at <a href="mailto:{{contact_email}}">{{contact_email}}</a> to get started.</p>
          </div>
        </li>
      </ul>
      {{> 'user-menu' }}
    </section>
  </nav>
</div>

{{#if cover_img_url}}
<header id="home" data-attr="cover_img_url" class="site-header image-holder image-as-background has-image"
  style="background-image: url(&quot;{{ cover_img_url }}&quot;);">
{{else }}
<header id="home" data-attr="cover_img_url" class="site-header image-holder image-as-background">
{{/if}}

  <div class="row">
    <div class="small-12 columns">

      {{#if_fileapi_support 'cors'}}
      <div id="cover-image-dnd" class="image-dnd file-upload hide-for-print">
        <p class="drop-instructions">Drop cover photo here or&hellip;</p>
        <p class="uploading-message">Uploading&hellip;</p>
        <label for="cover-image-file-chooser" class="file-upload-input-container button tiny radius"><span class="file-upload-label">Choose Cover Photo</span><input name="cover-image" id="cover-image-file-chooser" class="file-upload-input" type="file" accept="image/*" /></label>
      </div>
      <p class="remove-cover-img-btn-container clearfix hide-for-print"><button class="remove-img-btn btn btn-mini btn-secondary" data-confirm-msg="Are you sure you want to remove your cover image?"><span class="delete-icon">&#10005;</span> Remove Cover Photo</button></p>
      {{/if_fileapi_support}}
    </div>
  </div>

  <div class="row project-header container">
    <div class="small-12 columns">

      <div class="logo-table">
        <div class="logo-table-row">
          {{#if logo_img_url}}
          <div data-attr="logo_img_url" class="logo image-holder has-image">
          {{else}}
          <div data-attr="logo_img_url" class="logo image-holder">
          {{/if}}
            <img class="image-target" src="{{ logo_img_url }}" alt="{{ title }}">
            {{#if_fileapi_support 'cors'}}
            <div id="logo-image-dnd" class="image-dnd file-upload">
              <p class="drop-instructions nobreak">Drop logo here or&hellip;</p>
              <p class="uploading-message">Uploading&hellip;</p>
              <label for="logo-image-file-chooser" class="file-upload-input-container button tiny radius"><span class="file-upload-label">Choose Logo</span><input id="logo-image-file-chooser" name="logo-image" class="file-upload-input" type="file" accept="image/*" /></label>
            </div>
            <p class="clearfix"><button class="remove-img-btn btn btn-mini btn-secondary" data-confirm-msg="Are you sure you want to remove your logo?"><span class="delete-icon">&#10005;</span> Remove</button></p>
            {{/if_fileapi_support}}
          </div>
          <div class="float-label-container">
            <h1 class="site-title content-editable float-label-input" data-attr="title" contenteditable>{{{ title }}}</h1>
            <span class="float-label">Project Title</span>
          </div>
        </div>
      </div><!-- end .logo-table -->

    </div>
  </div>

  <div class="project-menu-container {{#gte sections.length 2}} has-project-menu{{/gte}}">
    {{#gte sections.length 2}}
    <div data-magellan-expedition="fixed" class="project-menu">
      <div class="row container">
        <div class="small-12 columns">
          <ul class="sub-nav">
            <li data-magellan-arrival="home"><a href="#home">Home</a></li>
            {{#each sections}}
            <li data-magellan-arrival="section-{{ slug }}"><a href="#{{ slug }}" class="content-editable" data-id="{{ id }}" contenteditable>{{ menu_label }}</a></li>
            {{/each}}
          </ul>
        </div>
      </div>
    </div>
    {{/gte}}
  </div>

</header>

<section class="project-details">
  <div class="row container">
    <div class="medium-4 medium-push-8 columns">
      <div class="highlight">
        {{!-- TODO: Abstract this out so that happening_now and get_involved use
           --       the same code
           --}}
        <h3>Happening Now!</h3>
        <p class="highlight-description content-editable float-label-input" data-attr="happening_now_description" contenteditable>{{{ happening_now_description }}}</p>
        <select class="highlight-link-selector" name="happening_now_link_url" data-link-type-name="happening_now_link_type">
          {{#select_highlight happening_now_link_type happening_now_link_url }}
          <option value="" data-link-type="">Link to...</option>
            {{#each sections }}
              <option data-link-type="section" data-id="{{ id }}" value="#section-{{ slug }}">{{ label }}</option>
              {{#is type 'timeline'}}
                {{#each ../../events}}
                  <option data-link-type="event" data-id="{{ id }}" value="#event-{{ slug }}">{{ label }}</option>
                {{/each}}
              {{/is}}
            {{/each }}
          <option data-link-type="external" value="external-link">External Link...</option>
          {{/select_highlight }}
        </select>
        <input name="happening_now_link_url" class="highlight-external-link {{#isnt happening_now_link_type 'external' }}hide{{/isnt}}" type="text" placeholder="http://" data-attr="happening_now_link_url" value="{{#is happening_now_link_type 'external' }}{{happening_now_link_url}}{{/is}}">
      </div>

      <div class="highlight">
        <h3>Get Involved!</h3>
        <p class="highlight-description content-editable float-label-input" data-attr="get_involved_description" contenteditable>{{{ get_involved_description }}}</p>
        <select class="highlight-link-selector" name="get_involved_link_url" data-link-type-name="get_involved_link_type">
          {{#select_highlight get_involved_link_type get_involved_link_url }}
          <option value="" data-link-type="">Link to...</option>
            {{#each sections }}
              <option data-link-type="section" data-id="{{ id }}" value="#section-{{ slug }}">{{ label }}</option>
              {{#is type 'timeline'}}
                {{#each ../../events}}
                  <option data-link-type="event" data-id="{{ id }}" value="#event-{{ slug }}">{{ label }}</option>
                {{/each}}
              {{/is}}
            {{/each }}
          <option data-link-type="external" value="external-link">External Link...</option>
          {{/select_highlight }}
        </select>
        <input name="get_involved_link_url" class="highlight-external-link {{#isnt get_involved_link_type 'external' }}hide{{/isnt}}" type="text" placeholder="http://" data-attr="get_involved_link_url" value="{{#is get_involved_link_type 'external' }}{{get_involved_link_url}}{{/is}}">
      </div>
    </div>

    <div class="medium-8 medium-pull-4 columns">
      <div class="float-label-container">
        <p class="project-location content-editable float-label-input" data-attr="location" contenteditable>{{{ location }}}</p>
        <span class="float-label">Project Location</span>
      </div>
      <div class="float-label-container">
        <div class="project-description content-editable float-label-input" data-attr="description" contenteditable>{{{ description }}}</div>
        <span class="float-label">Project Description</span>
      </div>
    </div>

  </div>
</section>

<div class="orderable-container" id="section-list"></div>

<footer class="site-colophon">
  <div class="row">
    <div class="small-12 columns">
      <div class="float-label-container">
        <p class="project-contact-info content-editable float-label-input" data-attr="contact" contenteditable>{{{ contact }}}</p>
        <span class="float-label">Contact Information</span>
      </div>
      <p>
        {{#if public}}
        <a href="#" class="save-btn button disabled">Publish Changes</a>
        {{else}}
        <a href="#" class="save-btn button disabled">Save Draft</a>
        {{/if}}
      </p>
      <p class="powered-by">{{#_}}Powered by <a href="/">Plan In A Box</a>, a product of <a href="http://openplans.org/">OpenPlans</a>.{{/_}}</p>
    </div>
  </div>
</footer>
