{% extends 'base.html' %}
{% load handlebarsjs from jstemplate %}
{% load as_json from planbox_utils %}


{% block title %}
Main Street Pedestrian Improvements
{% endblock %}


{% block meta_description %}
All about the Main Street Pedestrian Improvements
{% endblock %}


{% block styles %}
  {% if debug %}

  <link rel="stylesheet" href="{{ STATIC_URL }}bower_components/normalize-css/normalize.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="{{ STATIC_URL }}styles/style.css" type="text/css" media="screen, projection" />
  {% if is_owner %}
  <link rel="stylesheet" href="{{ STATIC_URL }}styles/admin.css" type="text/css" media="screen, projection" />
  {% endif %}

  {% else %}

  <link rel="stylesheet" href="{{ STATIC_URL }}styles/style.min.css" type="text/css" media="screen, projection" />
  {% if is_owner %}
  <link rel="stylesheet" href="{{ STATIC_URL }}styles/admin.min.css" type="text/css" media="screen, projection" />
  {% endif %}

  {% endif %}
{% endblock %}


{% block scripts %}
  {% if debug %}
  <script src="{{ STATIC_URL }}bower_components/jquery/jquery.js"></script>
  <script src="{{ STATIC_URL }}bower_components/jqueryui/ui/jquery.ui.core.js"></script>
  <script src="{{ STATIC_URL }}bower_components/jqueryui/ui/jquery.ui.widget.js"></script>
  <script src="{{ STATIC_URL }}bower_components/jqueryui/ui/jquery.ui.mouse.js"></script>
  <script src="{{ STATIC_URL }}bower_components/jqueryui/ui/jquery.ui.sortable.js"></script>
  <script src="{{ STATIC_URL }}bower_components/jqueryui-touch-punch/jquery.ui.touch-punch.js"></script>

  <script src="{{ STATIC_URL }}bower_components/handlebars/handlebars.js"></script>
  <script src="{{ STATIC_URL }}bower_components/underscore/underscore.js"></script>
  <script src="{{ STATIC_URL }}bower_components/backbone/backbone.js"></script>
  <script src="{{ STATIC_URL }}bower_components/backbone.marionette/lib/backbone.marionette.js"></script>
  <script src="{{ STATIC_URL }}bower_components/backbone-relational/backbone-relational.js"></script>
  <script src="{{ STATIC_URL }}bower_components/django-csrf.js/django-csrf.js"></script>
  {% else %}
  <script src="{{ STATIC_URL }}scripts/components.min.js"></script>
  {% endif %}

  <script>
    var Planbox = Planbox || {}
    Planbox.Data = {
      project: {{ project_data|as_json }},
      user: {{ user_data|as_json }},
      isOwner: {{ is_owner|as_json }},
      statuses: [
        { 'value': 'not-started', 'label': 'Not Started'},
        { 'value': 'active', 'label': 'Active'},
        { 'value': 'complete', 'label': 'Complete'}
      ]
    };
  </script>

  {% if debug %}
  <script src="{{ STATIC_URL }}scripts/handlebars-helpers.js"></script>
  <script src="{{ STATIC_URL }}scripts/models.js"></script>
  <script src="{{ STATIC_URL }}scripts/views.js"></script>
  <script src="{{ STATIC_URL }}scripts/app.js"></script>
  {% else %}
  <script src="{{ STATIC_URL }}scripts/app.min.js"></script>
  {% endif %}

  {% handlebarsjs '(.*)' precompile register_partials %}
{% endblock %}